function displayError(e){document.getElementById("error").innerHTML=e,document.getElementById("error").style.backgroundColor="#fcc",window.setTimeout(function(){displayInfo("")},2e3)}function displayInfo(e){document.getElementById("error").innerHTML=e,document.getElementById("error").style.backgroundColor="#fff"}function calc(e){displayInfo("Berechne...")
var n=new google.maps.DirectionsService,t=document.getElementById("startpoint").value,o=document.getElementById("endpoint").value
if(""==t||""==o)return displayInfo(""),void(e&&displayError("Start- und Endpunkt müssen ausgefüllt sein"))
var i={origin:t,destination:o,travelMode:google.maps.DirectionsTravelMode.DRIVING}
n.route(i,function(n,t){if(t==google.maps.DirectionsStatus.OK){var o=n.routes[0].legs[0].distance.value
document.getElementById("return-check").checked&&(o*=2),document.getElementById("result-kilometers").value=Math.round(o/10)/100
var i=document.getElementById("price").value,c=document.getElementById("consumption").value,l=o/1e3/100*c*i
document.getElementById("result-costs").value=Math.round(100*l)/100,displayInfo(""),directionsDisplay.setDirections(n),directionsDisplay.setMap(map)}else displayInfo(""),e&&displayError("Konnte keine Verbindung finden")})}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lng:7.8421043,lat:47.9990077},zoom:8}),directionsDisplay=new google.maps.DirectionsRenderer}document.getElementById("calc-button").onclick=function(){calc(!0)},document.getElementById("consumption").onfocus=function(){calc(!1)},document.getElementById("return-check").onclick=function(){calc(!1)},document.getElementById("swap").onclick=function(){var e=document.getElementById("startpoint"),n=document.getElementById("endpoint"),t=e.value
e.value=n.value,n.value=t}
var map,directionsDisplay
google.maps.event.addDomListener(window,"load",initMap)
